
<div id="status1" style="color: red;">Joystick 1</div>
<div id="status2" style="color: red;">Host</div>

<div class="container">
    <div>
        <div class="col-1-2">
            <img src="{{ url_for('html.video_feed') }}" width="100%"/>
        </div>

        <div class="col-1-2" >
            <div style="width: 100%; height: 25%;">
                <div class="col-1-2 center">
                    <input onclick="get_point()" type="button" value="Задать целевую точку">
                </div>
                <div class="col-1-2 center">
                    <input onclick="start_slam()" type="button" value="Запустить SLAM">
                </div>
            </div>
            <div style="width: 100%; height: 50%;">
                <div class="col-1-2">
                    <div>
                        <p class="center"><img src="../static/images/joystick-base.png" width="40%"/></p>
                    </div>

                    <div id="stick1">
                        <p class="center"><img src="../static/images/joystick-red.png" width="10%"/></p>	
                    </div>
                </div>
                <div class="col-1-2">
                    <div style="width: 100%;">
                        <input onclick="save_map()" type="button" value="Сохранить построенную карту">
                    </div>
                    <div style="width: 100%;">
                        <input onclick="stop_slam()" type="button" value="Остановить SLAM">
                    </div>
                </div>
            </div>
            <div style="width: 100%; height: 25;">
                Статус
            </div>
        </div>
    </div>
</div>

<script src='../static/js/joy.js'></script>

<script>
    let joystick1 = new JoystickController("stick1", 64, 8);
    const chatSocket = new WebSocket(
            'ws://' + window.location.hostname + ':5000/test'
        );
        document.getElementById("status2").innerText = window.location.hostname
    function update()
    {
        document.getElementById("status1").innerText = "Joystick 1: " + JSON.stringify(joystick1.value);
        chatSocket.send(JSON.stringify({
                'value': JSON.stringify(joystick1.value),
                'receiver_id':48414
            }));
    }

    function loop()
    {
        requestAnimationFrame(loop);
        update();
    }

    loop();
</script>